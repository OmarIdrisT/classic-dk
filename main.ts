function FadeToWhite(Time: number) {
    color.startFade(color.originalPalette, color.White, Time / 2)
    color.pauseUntilFadeDone()
    color.startFade(color.White, color.originalPalette, Time / 2)
}

controller.A.onEvent(ControllerButtonEvent.Pressed, function on_a_pressed() {
    
    if (in_title) {
        in_title = false
        Menu()
    } else if (false) {
        
    } else {
        
    }
    
})
function SpawnText(text: string, X: number, Y: number) {
    
    textSprite = textsprite.create(text, 0, 5)
    textSprite.setPosition(X, Y)
    textSprite.setOutline(2, 2)
}

function FadeToBlack(Time2: number) {
    color.startFade(color.originalPalette, color.Black, Time2 / 2)
    color.pauseUntilFadeDone()
    color.startFade(color.Black, color.originalPalette, Time2 / 2)
}

function Menu() {
    
    inMenu = true
    effects.blizzard.endScreenEffect()
    sprites.destroy(textSprite)
    scene.setBackgroundImage(img`
        ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
                                ................................................................................................................................................................
    `)
    scene.setBackgroundColor(12)
    myMenu = miniMenu.createMenu(miniMenu.createMenuItem("Jugar"), miniMenu.createMenuItem("Volver al título"))
    myMenu.setMenuStyleProperty(miniMenu.MenuStyleProperty.Width, 110)
    myMenu.setMenuStyleProperty(miniMenu.MenuStyleProperty.Height, 45)
    myMenu.y = 60
    myMenu.x = 80
    myMenu.setFrame(img`
        88888..8888888888888888....88888.
                                87768888777877787778777888867778.
                                87777686767876767678767688777778.
                                87767767667676676676766786776768.
                                8677676767767767677677678676778..
                                .877768777686767776867678667768..
                                .886668888888888888888888886688..
                                .888888866666666666666668877768..
                                88677786666666666666666668766778.
                                87766686666666666666666668776678.
                                87667786666666666666666668677778.
                                87777686666666666666666668866888.
                                88866886666666666666666668677778.
                                87777686666666666666666668776678.
                                87667786666666666666666668666778.
                                87766786666666666666666668777688.
                                88677786666666666666666668766778.
                                87766686666666666666666668776678.
                                87667786666666666666666668677778.
                                87777686666666666666666668866888.
                                88866886666666666666666668677778.
                                87777686666666666666666668776678.
                                87667786666666666666666668666778.
                                87766786666666666666666668777688.
                                .867778866666666666666668888888..
                                .886688888888888888888888866688..
                                .867766876768677767686777867778..
                                .8776768767767767677677676767768.
                                86767768766767667667676676776778.
                                87777788676787676767876768677778.
                                87776888877787778777877788886778.
                                88888..88888888888888888....8888.
                                .................................
    `)
    myMenu.setStyleProperty(miniMenu.StyleKind.Default, miniMenu.StyleProperty.Background, 6)
    myMenu.setStyleProperty(miniMenu.StyleKind.Default, miniMenu.StyleProperty.Foreground, 1)
    myMenu.onButtonPressed(controller.A, function on_button_pressed(selection: any, selectedIndex: any) {
        
        myMenu.close()
        inMenu = false
        if (selectedIndex == 0) {
            FadeToWhite(2000)
            color.pauseUntilFadeDone()
        } else {
            game.reset()
        }
        
    })
}

let myMenu : miniMenu.MenuSprite = null
let textSprite : TextSprite = null
let in_title = false
let inMenu = false
let inGame = false
inMenu = false
in_title = true
FadeToWhite(4000)
effects.blizzard.startScreenEffect(5000)
scene.setBackgroundImage(img`
    ffcfffffffffff6f6ddfffffffffffffffffffffffffdfdddffffffffdffdfdccfddddddddddd6666668ffff86666dffffff6f886cc8ccccffffffffffffffffffffffffffffffffffffffffffffffff
        ffcfffffffffff6f6ddfffffffffffffffffffffffffdfdddffffffffdffdfdccfddddddddddd6666668ffff86666dffffff6f886cc8ccccffffffffffffffffffffffffffffffffffffffffffffffff
        fccfcffcffffff6f7fffffffffffff666ffcfcffffffdf1ddbffffffddffcfdccdddddddddddd66666666fcc6666677ff66667766f6cccccffffffccffffffffffffffffffffffffffffffffffffffff
        f6f66ff6f6cfff8cffffffffffffff666ffff6ffff86ddddddfdffffddffffdccdddddddddd6666666666f66666666ff7799668f666ffcccfff66cc8ffffcffffffffffffffffffffffffffffcfffffc
        f6f66ff6f6cfff8cffffffffffffff666ffff6ffff86ddddddfdffffddffffdccdddddddddd6666666666f66666666ff7799668f666ffcccfff66cc8ffffcffffffffffffffffffffffffffffcfffffc
        66fc6666f68fbdff6fffcff6ffffff696fff66f666f6ddddddddffdfdddfffdddddddddddd66666666666666666666b976777766666ffffffc76666c8ffffffffffffffffffffffffffffffffcffcccc
        66f6cff8f6bdcfff6ffffcf6ffff666166866666666cddddddddbbdfdddf1fdddddddddd96666666666666666666677b66666666868cfffffb666886cffcffffffffffffffffffffffffffff8cfccccc
        66f6cff8f6bdcfff6ffffcf6ffff666166866666666cddddddddbbdfdddf1fdddddddddd96666666666666666666677b66666666868cfffffb666886cffcffffffffffffffffffffffffffff8cfccccc
        6686fffb7befff666fff8cf6fcf66666df86666666bddddddddddddfdddfdfdddddddddd666666666666666676667b776666c6cc88cffffff766688ffffcffffffffffffffffffffffffffff8c88ccfc
        66667cccf8fcf8666fffccfdfcd666eeee2ee68666dddddddddddddfddddde2222222ed66e22222222222222eee2222eeee2222222222222e6c686effffcfffffffffffffffffffffffffffcccfccc77
        66667cccf8fcf8666fffccfdfce222222222222266dddddddddddddfddde222222222222222222222222222222222222222222222222222222222222222222222222fffffffffffffffffffcccfccc77
        666cfffcfff888666fffcffdf22222222222222222ddddddddeeeeedddd22222222222222222222222222222222222222222222222222222222222222222222222222ffffffffffffffffffccf766676
        6666fcccf68888666fffccfdd222222222222222222c66622222222222d22222222222222222222222222222222222222222222222222222222222222222222222222cfffffffffffffcc8fdd766666c
        6666fcccf68888666fffccfde222444555555422222262222222222222222255555554222255555542555555222455555545555555555554222444422224444444222ecffffffffffffcc8fdd766666c
        666cfffff68888666fffccfd2222555555555554222222222222222222222255555555222255555544555555222555555525555555555554555555522245555552222cccfffffffffffcccff66666666
        666beccf668888666fffc6fd2222555555555555522222224455555422222255555555422255555544555555225555555425555555555554555555522255555542222acccffffffcffccfcc766c6666c
        666beccf668888666fffc6fd222255555555555554222224555555555422225555555552225555554455555524555555422555555555555445555552245555542222aacccffffffcffccfcc766c6666c
        668cfccf668888666ffffcf622225555555555555522225555555555554222555555555422555555445555552555555522255555555555542555555425555552222eaacccffffffcffccf766668ccc8c
        6fcffcc6668888666ffcfcf622225555555555555542245555555555555422555555555522555555445555555555555222255555544444422455555455555542222aaaccccfffcf888fbf766668fccff
        6fcffcc6668888666ffcfcf62222555555424555555245555555555555552255555555554255555524555555555555422225555554222222245555555555542222aaacccccfffcf888fbf766668fccff
        6cfffff6668888666ffcccf6222255555542255555525555555555555555425555555555525555552455555555555422222555555444422222555555555552222aaaaccffcfffc8ccccfd666c8cfffff
        df6cfccf668888666fff8ff9222255555542245555545555554224555555425555555555545555552455555555555222222555555555542222455555555522222aaacccffffffc8cccf777c88cffffff
        df6cfccf668888666fff8ff922225555552224555554555555222245555552555555555555555555245555555555422222255555555554222225555555542222aaaccccffffffc8cccf777c88cffffff
        666ffffc668888666fff8cf62222555555222455555455555422224555555255555545555555555524555555555542222225555555555422222555555552222aaaaccffffffff888ccf676cfcfffffff
        6666fffcf68888666fff8ff6222255555522255555545555542222455555525555554555555555552455555555555422222555555555522222245555554222eaaacccccccfcff88888f7668fffffffff
        6666fffcf68888666fff8ff6222455555522255555445555552222455555425555554455555555552455555555555522222555555222222222245555552222aaacccfccccfcff88888f7668fffffffff
        6666fffff68888666ffcccf6222455555522555555425555554224555555425555554255555555552455555555555542224555555222222222245555552222aaaccffffc8ccff88ccc766ffffffffffc
        666cdccff68888666fffccf6222455555545555555225555555555555555225555554245555555552455555555555552224555555555554222245555552222aacccffffcfcffccccbbc6ffffffcffffc
        666cdccff68888666fffccf6222455555555555552224555555555555554225555552225555555552455555455555554224555555555554222245555552222aaccfffffcfcffccccbbc6ffffffcffffc
        666bcffff68888666fffccf6222455555555555542222455555555555552225555552225555555552455555245555555224555555555554222245555552222aaccfffcccbffffcccfffcffffff8fffcc
        66cbfccff68888666ffffffc222455555555555222222255555555555522225555552224555555542455555225555555424555555555554222245555552222acccfffffecfccfc6fff77ffffffcc888c
        66cbfccff68888666ffffffc222455555555542222222224555555555222225555552222555555542455555222555555524555555555554222245555552222acccfffffecfccfc6fff77ffffffcc888c
        66dffffcf68888666ffffffc222455555442222222a22222245555442222225555552222454444222455555222455555444555555555554222245555552222accffffffcffccf66888888fffffcccccc
        6ccffffcf68888666fffccf822222222222222222aaa222222222222222222222222222222222222245555522224422222222222222222222222222222222eaccffffccfffcc768f888cccfccf88cc8f
        6ccffffcf68888666fffccf8222222222222222eaaaaa22222222222222222222222222222222222222222222222222222222222222222222222222222222aaccffffccfffcc768f888cccfccf88cc8f
        6fcfffff668888666fffccf68222222222222eaaaaacccc2222222222ea222222222222222222222222222222222222222222222222222222222222222222aaccfcffffff676c88888cfcf8cccffcc76
        cbffffff668888666fffccf688ce22222eaaaaaaaccccccccce22eaaaaaae22222222aaaeaaaaa22222222222222222eae22222222222222aae22222222eaaaccffffffff86c888c88f6868ccf7f6666
        cbffffff668888666fffccf6888cccaaaaaaaaaccccc666cccccaaaaaaaccccaaaaaaaaaaaaaaaaae2222222aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaacccffffffff86c888c88f6868ccf7f6666
        bfffffff668888866ffffcf88666cccccccccccccc6666666ccccccccccccccccccccccccccccccccccaaaaaaaaaaaaaccccccccccccccccccccccccccccccccfffffffff88c88c8ffcc88ccb67666ff
        fffffcc6888888666ffffcf666666cccccccccc666666666666ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccffffffccff8cc888fcc668cf67768ccff
        fffffcc6888888666ffffcf66666666668866c6666666666666666666666666666ddddddd6866cccccccccccccccccccccfffcffcccfffffcccfccccccccbb8ffffffccff8cc888fcc668cf67768ccff
        fffffff6688888666ffffcf66666666668866c66666666666666666666666666666dddddd668888c88cccc888cccccccccfffcffccccffccffff68cccccd7bcffffffffff8cccc8fff6cfff6766cffff
        ffc8fff8888888866ffcfcf66666666668868c66666e2222222eee2222ee66666666dddd6667ee2222222eccee2222222eccccffcee22effccfc888ccff7cbcffcfffffff888ccc8cc8fc76668cfffff
        ffc8fff8888888866ffcfcf66666666668868c666622222222222222222222226666dddd666222222222222222222222222cce22222222222efc888ccff7cbcffcfffffff888ccc8cc8fc76668cfffff
        fffffff8888888668ffcfcf66666666668888c666222222222222222222222222eeeeeed66b2222222222222222222222222222222222222222c8ccccff7c8fffffffffffccfff8888ffb7788fcf7766
        fffff668868888688ffccff666666666688668666222222222222222222222222222222222e22222222222222222222222222222222222222222ccc8fcccccdffffffffffc776888cc777766cfd66666
        fffff668868888688ffccff666666666688668666222455555522255555552222222222222222255555552222255555542222224455555442222ccc8fcccccdffffffffffc776888cc777766cfd66666
        fffff6668cc888688ffffcf868666666688668666222455555522455555552222222222222222255555554222255555522222255555555554222ccffffffccdffffcfffff668888cbbe76666cf766668
        ffcf6666688888668ffffcf886866666888668668222455555422555555522224455555422222255555555222255555522224555555555552222cccfffffccdcffcfffffc68688ccddb6688ff67788c8
        ffcf6666688888668ffffcf886866666888668668222455555425555555422245555555554222255555555422255555522245555555555552222accfffffccdcffcfffffc68688ccddb6688ff67788c8
        cffff888888888666fffccf8cc66666668866886c222455555445555554222555555555555422255555555522455555522255555555555552222acccfffccc1ccfcfffffff88cc8fdd7cf8fffffbffff
        ffcf6cc868888888cfff8cfccc88666668866888c2224555554555555522245555555555555422555555555424555555225555555555555522222cccfffccfbfcb8ffffff8cfff86fffffcffffdfffff
        ffcf6cc868888888cfff8cfccc88666668866888c2224555555555555222455555555555555522555555555524555555225555555542222222222cccfffccfbfcb8ffffff8cfff86fffffcffffdfffff
        ff8fccc6c8888888cffffcfc8888666688c88888c2224555555555554222555555555555555542555555555544555555245555554244444444222eccfffccfcfcbcffffffbc6fc8888ffcffffcfffff8
        fffffff68c8888886ffffcf88888888888cb888b62224555555555552222555555422455555542555555555554555555255555552455555555222ecccccfcfffdcffffff8c6cc888cccffffffdff88cc
        fffffff68c8888886ffffcf88888888888cb888b62224555555555522224555555222245555552555555555555555555255555542455555555222ecccccfcfffdcffffff8c6cc888cccffffffdff88cc
        ffcfcff6688888888fffccf8888888886cc6d8fd62224555555555542224555554222245555552555555455555555555255555542455555555222eaccccfcfffdfffffff888ccc88cccffc88ff8cccfc
        ffff8dd6888888888ffcfff88888888dc686cd96e2225555555555552224555554222245555552555555255555555555255555552455555555222eaccfffcfffdcffffff888cc8ccccccc88cbf8fcccf
        ffff8dd6888888888ffcfff88888888dc686cd96e22255555555555542245555552222455555445555552455555555542555555542224555552222accfffcfffdcffffff888cc8ccccccc88cbf8fcccf
        fffccff7f88888886fff8ff888888886bdc89b66e22255555555555552225555554224555555445555552255555555542555555554445555552222accfffbffdcfffffffc88cccc8cccccc6ccf8cccfc
        fffffbbf888888888ffc8cf886cbcccc6ccc666ce22255555555555555225555555555555555245555552255555555542455555555555555552222acc66fcffbfcffffffcccff7c8cccccfcfff88cc8c
        fffffccf868888cc8fffccf88688668666c86866e22255555545555555424555555555555554245555552245555555542255555555555555552222accfffcfbfccffffffccb7666f8888cfcf888cccbf
        fffffccf868888cc8fffccf88688668666c86866e22255555524555555522455555555555552245555552225555555542245555555555555552222accfffcfbfccffffffccb7666f8888cfcf888cccbf
        cffffccdf88888888ffffcf888888888bdd98d66e2225555552255555554225555555555552224555555222555555554222455555555555554222eaccffdcffcccffffff87786886cc88fffc8cccffcc
        fffffffff8fc888c8fffccf88886ffdb6d8888fde2225555552245555555222455555555522224555555222455555554222245555555555422222aaccffdcfffccfffffff7f6c8ccff888bc8ccccfffc
        fffffffff8fc888c8fffccf88886ffdb6d8888fde222555555222455555422222455554422222455555522225444442222222244555544222222eaaccffdcfffccfffffff7f6c8ccff888bc8ccccfffc
        cfffcffcfc6fd78d6fffccf868f9bb98fdd9f76de22255555522224422222222222222222222222222222222222222222222222222222222222eaaaccffdcfffccfffff8f868888ccc888dffccccffff
        ffff8ffcb6cc68cccddcfcf8868888c7b76c966ce222222222222222222222222222222222222222222222222222222222e222222222222222aaaacccfffffff88ffffff888888cfffcc8fdcccccccbc
        ffff8ffcb6cc68cccddcfcf8868888c7b76c966c6222222222222222222222e2222222222ea222222222222222222222eaaae22222222222aaaaaccccfffffff88ffffff888888cfffcc8fdcccccccbc
        ffcfcffcc8c7f7cf9ffffcf8878888d7688c6688822222222222222222eaaaaaaae22eaaaaaae22222222aaaeaaaaaaaaaaaaaaee222eaaaaaaacccccffffccffffffffcccc88f7666c8cfdccc8bcccc
        ffcdfccccccfdf67fffdfcfc7c8877688888888888ee2222222aaaaaaaaaaaaacccaaaaaaaaccccaaaaaaaaaaaaaaaaacccccccccaaaaaaaacccccf88ffdfccfffffffffcccc867cff8ffbcffffffffc
        ffcdfccccccfdf67fffdfcfc7c88776888888888888cccaaaaaaaaaaaaccccccccccccccccccccccccccccccccccccccccccccccccccccccccccfff88ffdfccfffffffffcccc867cff8ffbcffffffffc
        ffcfdccfc6fcf6cffddffcfffc8966988886cc88cc86cccccccccccccccccccccccccccccccccccccccccccccccccccccfff8bccccccccccccccccffffffdfcfcfffffffccccc6ccff8bbcffffffccfc
        bfffcffff8ffccffcff7fcdf8b88668c8888cc68ccc86ccccccccccccccc888888866666666cc8f9888ccccccccc8fccccfffdfcccccffffdffc8ffffffecfffcfffffff88cccc88888fcffffffcffcc
        bfffcffff8ffccffcff7fcdf8b88668c8888cc68ccc86688868688888888888888866666666cc8f9888ccccccccc8fccccfffdfcccccffffdffc8ffffffecfffcfffffff88cccc88888fcffffffcffcc
        bffffccfc8fc7c8fcccfc7cc8688ff86f8ccc8c888c868688c888888888888888866666667888cc8ccccccccccfcc8ccccccfcffccbbf766ccffccffdbbcfffccfffffffff888c8c88fcfffccc88cccf
        8bfff88fffffcccfcbbffcff8c6cccb8c8c888c8888c8886888888888888888888886666886cc668888cc7667687ffccccccccbcfcbfc866fffffcfdfcccffdcffcfffffffcccccfffefffccccfccccc
        8bfff88fffffcccfcbbffcff8c6cccb8c8c888c8888c8886888888888888888888886666886cc668888cc7667687ffccccccccbcfcbfc866fffffcfdfcccffdcffcfffffffcccccfffefffccccfccccc
        8fffcccccf8ff8cfcfffc76f76fc88cccccfcc88888c8888c88888888888888888886666868888ff888cf76676cf7f888888c8ccf7bcc6cccfcffcffdccffbffffcffffffffc88c8ffcfffc8ccffffcc
        f8fffccb6ffcf8f78ffff8f78cff77cccc868886888c8888c8888888888888888888886688888c888cc8d6778ccf8fc888ff88f6ff7cffffcffffffecfffcc8fffcfffffffffcc88ffcfff8ccccfffff
        f8fffccb6ffcf8f78ffff8f78cff77cccc868886888c8888c8888888888888888888886688888c888cc8d6778ccf8fc888ff88f6ff7cffffcffffffecfffcc8fffcfffffffffcc88ffcfff8ccccfffff
        c8dffcc86ffffc88ffffffffffcfcc88cf6cc8ccccc88888cc888868888888888888666866888c88888c66cccf86cc8888886f7c7f88fcbbfcfffffdffffbcfffcfcfffffffffccfccfffccccfccccfc
        cfffcccf8fccff88fcc8cfcf7f7fffcc8cc88c88cccccc88c88888888888886666666688888ccc88c88cffffccc788c88c88c6fcc6ff8cccfcffffdccffd8ffff8fffffffffffffcffffcf8f88ffffff
        cfffcccf8fccff88fcc8cfcf7f7fffcc8cc88c88cccccc88c88888888888886666666688888ccc88c88cffffccc788c88c88c6fcc6ff8cccfcffffdccffd8ffff8fffffffffffffcffffcf8f88ffffff
        ccfffffdfc6fff8cfccfcff7cfffffc788cfcc8cccccccccc8888888888866666666968c8ccccc88c88bffccccc88fc8c888ff6f66666ffffcfffdbffbb8ffffbcffffffffffff8fccf8ffffcf8fffff
        ccfffffffcf77ffcfccffffcffffffff86f7ecd888888ccccc8888888896666669666888f88ccc8c88976cffbf8888888888ff686868fcfffffffdfbfcc8ffffdcfffffffffffffffffffcffffffffff
        ccfffffffcf77ffcfccffffcffffffff86f7ecd888888ccccc8888888896666669666888f88ccc8c88976cffbf8888888888ff686868fcfffffffdfbfcc8ffffdcfffffffffffffffffffcffffffffff
        fffffffffffffcffffffffffffff66fffcfb8fccff88888868888888888866666786688888c6688f767788ccccb8cc8888bbb76c6ffffcffffcccffbfddcfffffcf8fffffffffffffffffffffcffffff
        ffffffff7bffcffffffffffffcffff6ffffffffffff8cccfccc8cccc88c886666888888ff88888f9768fccccccfcccc8cf77768cffffffff7f67ffcbfddffffffcfcffffffffffffffccfff6ffffffff
        ffffffff7bffcffffffffffffcffff6ffffffffffff8cccfccc8cccc88c886666888888ff88888f9768fccccccfcccc8cf77768cffffffff7f67ffcbfddffffffcfcffffffffffffffccfff6ffffffff
        fffffffcfc6fff8fffffffffffbbffff88fccccc886b7cbbbbbccc888888c66886668886888886766cccccccccf8888c776686c8f8ffcfff7ccfcffcffff6fffffffffffffffffffffffcff6fcffffff
        fffffffff6fffffffffffffffffc77ffc8ffccfffffff88fcfcccc8666beeeccc6668888fccccf7f88ccfcffccccccb766886c88cccccfffcf8cfcccfffbcfbfcc8fcffcfffffccffffcfcf6cfcfffff
        fffffffff6fffffffffffffffffc77ffc8ffccfffffff88fcfcccc8666beeeccc6668888fccccf7f88ccfcffccccccb766886c88cccccfffcf8cfcccfffbcfbfcc8fcffcfffffccffffcfcf6cfcfffff
        66fcffffffcff6fcf666fffffffcccdffc6888f666cf6ffcffc8cc6666c888888866666886ccc6f8cccc7cccdfc8c86668888ccc68fffffffff8f6b6666c8ffff888c88cccffff66cccccf8fccfcffff
        fffffffffdffbffffffffffffffcccdbfffc8cf688fffff6fffccc886f6888c8888666668888888c8cccfcfffcf88cf768ff8ddcf77778886fffd866666c8888ccc8cffcfffff8f6ffcfccff66ffccc6
        fffffffffdffbffffffffffffffcccdbfffc8cf688fffff6fffccc886f6888c8888666668888888c8cccfcfffcf88cf768ff8ddcf77778886fffd866666c8888ccc8cffcfffff8f6ffcfccff66ffccc6
        fcff6fffff7ffdfff77fffffffcfffccfffffcffffffffffffffff666d88ccccccc66668888888888ccdff8888c8fd68c8ff6cccdfd76888fffd7966cff88cc88ffffffffffffffffffcfcffccfcffcf
        fffffccffff7fffffcccffffffffff8cff6cccfffffc866cbf8688f666ccccccccc886666666666888887766c888cff8fcffc766667668fffff6c8cffffffffcfffffffffffff6fcffcf8ff8f68cffcf
        fffffccffff7fffffcccffffffffff8cff6cccfffffc866cbf8688f666ccccccccc886666666666888887766c888cff8fcffc766667668fffff6c8cffffffffcfffffffffffff6fcffcf8ff8f68cffcf
        fcfcfff7ffcfffffcffffffcfffffffffff886ff886fc88f6fffffffc6888888888866686666686688c8ccff8cc88cf7cfddf7f67c6f8fffffcb7776fffffffffffc666c6866fcfcffc866c6fcffcccc
        fcfffffff7cfffcfcfffcccfd7fffffffffcffffff6ff8ff8ff8888fffff8888866666888668888887ff8888cc8ccf777bff7cff7fb6ffdd7f7ccffffffcfc6f66fccccff6fffffccc8fc6cfcf6ffffc
        fcfffffff7cfffcfcfffcccfd7fffffffffcffffff6ff8ff8ff8888fffff8888866666888668888887ff8888cc8ccf777bff7cff7fb6ffdd7f7ccffffffcfc6f66fccccff6fffffccc8fc6cfcf6ffffc
        ffccfff7f8fffdcffffcdecdfffcfffff66c6888ff8fff68ffff88cfcccc866669668bccc8666686c8fffccc8cb66fffdbccf76ff767d7ff7ccfc8cccffffff66ccfccc6fffcfcfc66fff6ff8fccffcc
        fffff77ffffcdffdddd8cffffffffffff6ffff66ffffffcff8ffffff8f8ff666699668ccc88999ddccfffccccddfc6fffcddff7ff7f7c7ccffffffffffffffffffcc6ffcffffccff66ccc6cfccccfff8
        fffff77ffffcdffdddd8cffffffffffff6ffff66ffffffcff8ffffff8f8ff666699668ccc88999ddccfffccccddfc6fffcddff7ff7f7c7ccffffffffffffffffffcc6ffcffffccff66ccc6cfccccfff8
        fc66ccccf7c7cc7cfccc7cfffffffffc8868fc88ccffffffff8fffcc6668c8f776999666966666becfcfcc66667c6c766677f7c76cf66fffccc6cffffffffffffffccccccfcfc8ffccf6f88ccffcfffc
        fcff688f6fcf78ffdffd8fffffffffff8ff68ffcccfffffcfcc8fffcffc8fcf889f96c6966666f8cc7fcccff6beebfbff677fff8fffffffffffcffffffffcf6fcf6c6ccfcccfccffffc6c6ccfcfcffff
        fcff688f6fcf78ffdffd8fffffffffff8ff68ffcccfffffcfcc8fffcffc8fcf889f96c6966666f8cc7fcccff6beebfbff677fff8fffffffffffcffffffffcf6fcf6c6ccfcccfccffffc6c6ccfcfcffff
        ffcc6ffccfcdcf8bfbbf8cffffffddcffffffff888cfffffffcfffffcffffff888f88c6866866ff8cffff7ccbbdef7fffcffffcccff6fffffffffffff6666ff68ccf666fffcffcccfffcfffff8ffffff
        fffffccfccccfffffccfdd6ff7dfffffcfffffffffffffffffffffffffffffffff6866c999866f6f66f77fffcfc7c6f7dbbbfdbccfff6ffffffffffffffffffff66ccccf6cfcfcfcffffcffcffffffff
        fffffccfccccfffffccfdd6ff7dfffffcfffffffffffffffffffffffffffffffff6866c999866f6f66f77fffcfc7c6f7dbbbfdbccfff6ffffffffffffffffffff66ccccf6cfcfcfcffffcffcffffffff
        fcffcffffffcfff7fffdcfdfdcfcff6fffcff666fffffffffcffffcfffffffffffffcccf8d766879c67cffffffffcfdfdeffcffdc8cffffffffffffffffffffffcfcfccf6cccfc6cffcffcffffffffff
        ffcffffcf8fc6cccf77ff777ffffffcff6ccc8c8ff86fffcf8ff887ccccccff88ccc777766c66866c6cccbddbd78ffec8bccbfccffffccbbbcfffffffffff8ff6ff6fcccfccfcffc66ccccffffffffff
        ffcffffcf8fc6cccf77ff777ffffffcff6ccc8c8ff86fffcf8ff887ccccccff88ccc777766c66866c6cccbddbd78ffec8bccbfccffffccbbbcfffffffffff8ff6ff6fcccfccfcffc66ccccffffffffff
        fcffffffccffffff8ffffbcffcfffff8f888cc866668fdddb7fccc666768676776c77777776cc8cccccccdeebccffbc8cfffcfffffffcf88ffffffc6666ff6fccf66c66c8ffffcfcfffffffffffffffc
        fcfffffcfffccffcfffd7c8dfd7fffdf888cf66fffffcdccc8b677c6767f76f88f677677777779dddddffcccfffffffffddddffffffbfcccffcf668ffccccffff6cccfffffffffffffffffffcfffffff
        fcfffffcfffccffcfffd7c8dfd7fffdf888cf66fffffcdccc8b677c6767f76f88f677677777779dddddffcccfffffffffddddffffffbfcccffcf668ffccccffff6cccfffffffffffffffffffcfffffff
        ccfffffffcffccccfccf7fffcfffff8c888cf88fcccdf8c8cff866ccc8cfc7cfffffff7778f66fffbcffd6ffcffffdcfb8cc86cfffffffffffc66fffffffff66fccccfffffffcfffffff8cffffffffff
        cf88ffffffff8ffc6fff6fdcffbd77dfffffffff88fcfffcfffccccc6ddb97777777777777fffffeffffffffffffbffcccfffcfffffffcffffccffccfffff6ff8ff8666cccf6fffffffffffffffffffc
        cf88ffffffff8ffc6fff6fdcffbd77dfffffffff88fcfffcfffccccc6ddb97777777777777fffffeffffffffffffbffcccfffcfffffffcffffccffccfffff6ff8ff8666cccf6fffffffffffffffffffc
`)
SpawnText("Press Start", 76, 110)
while (in_title) {
    textSprite.setFlag(SpriteFlag.Invisible, false)
    pause(1000)
    textSprite.setFlag(SpriteFlag.Invisible, true)
    pause(1000)
}
namespace SpriteKind {
    export const boss = SpriteKind.create()
    export const princess = SpriteKind.create()
    export const barril = SpriteKind.create()
}

controller.down.onEvent(ControllerButtonEvent.Pressed, function on_down_pressed() {
    mario.setImage(assets.image`
        1
    `)
})
controller.right.onEvent(ControllerButtonEvent.Pressed, function on_right_pressed() {
    mario.setImage(assets.image`
        1
    `)
})
controller.left.onEvent(ControllerButtonEvent.Pressed, function on_left_pressed() {
    mario.setImage(assets.image`
        marioL
    `)
})
controller.up.onEvent(ControllerButtonEvent.Pressed, function on_up_pressed() {
    if (mario.isHittingTile(CollisionDirection.Bottom)) {
        mario.vy = -150
        if (controller.left.isPressed()) {
            mario.setImage(assets.image`
                mJumpL
            `)
        }
        
        if (controller.right.isPressed()) {
            mario.setImage(assets.image`
                mJumpR
            `)
        }
        
    }
    
})
let barrilP : Sprite = null
let barrilR : Sprite = null
let mario : Sprite = null
mario = sprites.create(assets.image`
    1
`, SpriteKind.Player)
mario.setPosition(6, 615)
controller.moveSprite(mario, 80, 0)
mario.ay = 500
scene.setBackgroundImage(assets.image`
    hm
`)
tiles.setCurrentTilemap(tilemap`
    level1
`)
scene.setBackgroundColor(15)
scene.cameraFollowSprite(mario)
let kong = sprites.create(assets.image`
    2
`, SpriteKind.boss)
kong.setPosition(395, 100)
let peach = sprites.create(assets.image`
    3
`, SpriteKind.princess)
peach.setPosition(300, 70)
game.showLongText("Bienvenido a Donkey Kong! (Sí...Esto es un Donkey Kong...)", DialogLayout.Bottom)
game.showLongText("Este fue el primer juego de Donkey Kong, salido en el año 1981, también fue la primera aparición de el fontanero más conocido del planeta.", DialogLayout.Bottom)
game.showLongText("Este juego intenta recrear la experiencia exacta de ese clasico, esperamos qe lo disfrutes.", DialogLayout.Bottom)
forever(function on_forever() {
    
    for (let index = 0; index < 999999; index++) {
        pause(3000)
        barrilR = sprites.create(assets.image`
            barril1
        `, SpriteKind.barril)
        tiles.placeOnRandomTile(barrilR, sprites.dungeon.collectibleRedCrystal)
        barrilR.setVelocity(-50, 0)
        barrilR.ay = 500
    }
})
forever(function on_forever2() {
    
    for (let index2 = 0; index2 < 999999; index2++) {
        pause(3000)
        barrilP = sprites.create(assets.image`
            barril2
        `, SpriteKind.Projectile)
        tiles.placeOnRandomTile(barrilP, sprites.dungeon.collectibleBlueCrystal)
        barrilP.setVelocity(50, 0)
        barrilP.ay = 500
    }
})
